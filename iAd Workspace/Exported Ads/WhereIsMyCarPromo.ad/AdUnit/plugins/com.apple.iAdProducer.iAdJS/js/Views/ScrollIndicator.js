
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ScrollIndicator",superclass:iAd.View,synthesizedProperties:["visible","width","height","indicatorStyle"]});iAd.ScrollIndicator.THICKNESS=7;iAd.ScrollIndicator.END_SIZE=3;iAd.ScrollIndicator.TYPE_HORIZONTAL="ad-horizontal";iAd.ScrollIndicator.TYPE_VERTICAL="ad-vertical";iAd.ScrollIndicator.prototype.init=function(a){this.callSuper();this.type=a;this.layer.addClassName(a);this._visible=false;this._width=iAd.ScrollIndicator.THICKNESS;this._height=iAd.ScrollIndicator.THICKNESS;this.position=new iAd.Point(-iAd.ScrollIndicator.THICKNESS,-iAd.ScrollIndicator.THICKNESS);this.positionBeforeHide=this.position;this.lastPositionUpdateInHide=false;this._indicatorStyle=iAd.ScrollView.INDICATOR_STYLE_DEFAULT;this.visible=false};iAd.ScrollIndicator.prototype.createLayer=function(){this.callSuper();this.layer.addClassName("ad-scroll-indicator");this.layer.addEventListener("webkitTransitionEnd",this,false);this.start=this.layer.appendChild(document.createElement("div"));this.middle=this.layer.appendChild(document.createElement("div"));this.end=this.layer.appendChild(document.createElement("div"))};iAd.ScrollIndicator.prototype.setPosition=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);this.callSuper(a);this.lastPositionUpdateInHide=false};iAd.ScrollIndicator.prototype.setSize=function(a){this.width=a.width;this.height=a.height;this._size=a};iAd.ScrollIndicator.prototype.setIndicatorStyle=function(c){if(!c){return}this._indicatorStyle=c;this.layer.removeClassName(this._indicatorStyle);this.layer.addClassName(this._indicatorStyle);var a=(this.type===iAd.ScrollIndicator.TYPE_HORIZONTAL)?"-3px 0":"0 -3px";var b=iAd.Path.assetsPath+"scroll-"+c.substr(3)+".png";if(iAd.Device.HAS_HIDPI_DISPLAY){b=iAd.Path.appendHiDPISuffix(b)}this.middle.style.background='url("'+b+'") '+a};iAd.ScrollIndicator.prototype.setWidth=function(a){this.middle.style.webkitTransform="translate3d(0,0,0) scale("+(a-iAd.ScrollIndicator.END_SIZE*2)+",1)";this.end.style.webkitTransform="translate3d("+(a-iAd.ScrollIndicator.END_SIZE)+"px,0,0)";this._width=a};iAd.ScrollIndicator.prototype.setHeight=function(a){this.middle.style.webkitTransform="translate3d(0,0,0) scale(1,"+(a-iAd.ScrollIndicator.END_SIZE*2)+")";this.end.style.webkitTransform="translate3d(0,"+(a-iAd.ScrollIndicator.END_SIZE)+"px,0)";this._height=a};iAd.ScrollIndicator.prototype.setVisible=function(a){if(a){this.fading=false;this.opacity=1;this.position=this.lastPositionUpdateInHide?this.positionBeforeHide:this.position}else{if(!this.fading){this.fading=true;this.opacity=0;this.lastPositionUpdateInHide=true;this.positionBeforeHide=this.position}}this._visible=a};iAd.ScrollIndicator.prototype.flash=function(){this.flashing=true};iAd.ScrollIndicator.prototype.handleEvent=function(a){if(a.type!="webkitTransitionEnd"){return}this.callSuper(a);if(this.flashing){this.flashing=false}else{if(this.fading){this.position=new iAd.Point(-iAd.ScrollIndicator.THICKNESS,-iAd.ScrollIndicator.THICKNESS);this.fading=false}}};