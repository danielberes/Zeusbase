
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

(function(){iAd.Class.processMethod(iAd.ScrollView,"setValueForAttribute");var b=iAd.ScrollView.prototype.setValueForAttribute;iAd.ScrollView.prototype.setValueForAttribute=function(i,h){switch(h){case"ad-scroll-direction":this.verticalScrollEnabled=(i!=="horizontal");this.horizontalScrollEnabled=(i!=="vertical");break;case"ad-content-offset-x":this.contentOffset=new iAd.Point(parseFloat(i)||0,this.contentOffset.y);break;case"ad-content-offset-y":this.contentOffset=new iAd.Point(this.contentOffset.x,parseFloat(i)||0);break;case"ad-content-width":this.contentSize=new iAd.Size(parseFloat(i)||0,this.contentSize.height);break;case"ad-content-height":this.contentSize=new iAd.Size(this.contentSize.width,parseFloat(i)||0);break;case"ad-content-background":this.setContentBackground(i);break;case"ad-content-background-image":this.setContentBackgroundImage(i);break;case"ad-content-background-size":this.setContentBackgroundSize(i);break;case"ad-content-background-repeat":this.setContentBackgroundRepeat(i);break;case"ad-content-background-position":this.setContentBackgroundPosition(i);break;case"ad-content-background-color":this.setContentBackgroundColor(i);break;case"ad-indicator-style":b(i||iAd.ScrollView.INDICATOR_STYLE_DEFAULT,h);break;default:b.apply(this,arguments)}};iAd.Class.processMethod(iAd.ScrollView,"setUsesNativeScrolling");var d=iAd.ScrollView.prototype.setUsesNativeScrolling;iAd.ScrollView.prototype.setUsesNativeScrolling=function(h){if(iAd.Device.iOS_VERSION==null&&!iAP.Context.projectIsOfType("iTunesProject")){h=false}d.call(this,h);if(this.usesNativeScrolling&&iAP.Context.projectIsOfType("iTunesProject")){this.wantsHardwareLayerBacking=true}};var g=iAd.ScrollView.prototype.readPropertiesFromLayerAttributes;iAd.ScrollView.prototype.readPropertiesFromLayerAttributes=function(i){var k=parseFloat(this.getLayerCustomAttributeValue("ad-content-offset-x"))||0;var j=parseFloat(this.getLayerCustomAttributeValue("ad-content-offset-y"))||0;var h=parseFloat(this.getLayerCustomAttributeValue("ad-content-width"))||0;var l=parseFloat(this.getLayerCustomAttributeValue("ad-content-height"))||0;this._ignoreEditor=true;this.contentSize=new iAd.Size(h,l);if(g){g.apply(this,arguments)}else{this.callSuper(i)}this.contentOffset=new iAd.Point(k,j);delete this._ignoreEditor};iAd.Class.processMethod(iAd.ScrollView,"adjustContentSize");var e=iAd.ScrollView.prototype.adjustContentSize;iAd.ScrollView.prototype.adjustContentSize=function(h){e.apply(this,arguments);if(this._contentSize!==iAd.ScrollView.AUTOMATED_CONTENT_SIZE){this._hostingLayer.style.width=this.adjustedContentSize.width+"px";this._hostingLayer.style.height=this.adjustedContentSize.height+"px"}};iAd.Class.processMethod(iAd.ScrollView,"updateAlwaysBounce");var f=iAd.ScrollView.prototype.updateAlwaysBounce;iAd.ScrollView.prototype.updateAlwaysBounce=function(h){f.apply(this,arguments);this.adjustContentSize()};iAd.ScrollView.prototype.setContentBackground=function(i){if(i){this._hostingLayer.style.backgroundColor="";if((i.indexOf("-webkit-")===0)&&(i.indexOf("gradient")>-1)){if(!this._hostingLayer.style.backgroundImage){var h=this;setTimeout(function(){h._hostingLayer.style.backgroundImage=i},0)}else{this._hostingLayer.style.backgroundImage=i}}else{this.setContentBackgroundImage(i)}}else{this._hostingLayer.style.backgroundImage="";this._hostingLayer.style.backgroundColor="";this._hostingLayer.style.backgroundSize="";this.layer.style.backgroundSize=""}};iAd.ScrollView.prototype.setContentBackgroundImage=function(h){if(!h){this._hostingLayer.style.backgroundImage="";this._hostingLayer.style.backgroundSize="";return}this.pendingContentBackground=iAd.Image.imageForURL(h,this.layerHasCustomAttribute("ad-has-hidpi-version"));this.pendingContentBackground.addPropertyObserver("loaded",this,"handleContentBackgroundImageLoaded");if(this.pendingContentBackground.loaded===true){this.handleContentBackgroundImageLoaded()}};iAd.ScrollView.prototype.setContentBackgroundSize=function(h){this._hostingLayer.style.backgroundSize=h||""};iAd.ScrollView.prototype.setContentBackgroundRepeat=function(h){this._hostingLayer.style.backgroundRepeat=h||""};iAd.ScrollView.prototype.setContentBackgroundPosition=function(h){this._hostingLayer.style.backgroundPosition=h||""};iAd.ScrollView.prototype.setContentBackgroundColor=function(h){if(h&&h!="transparent"){this._hostingLayer.style.backgroundImage="";this._hostingLayer.style.backgroundColor=h}else{this._hostingLayer.style.backgroundColor=""}};iAd.ScrollView.prototype.handleContentBackgroundImageLoaded=function(){if(!this.pendingContentBackground){return}var i=this.pendingContentBackground;var h=i.resolvedURL;if((i.width>parseInt(this.layer.style.width,10))&&(i.height>parseInt(this.layer.style.height,10))){this.sizeToFit(new iAd.Size(i.width,i.height))}this._hostingLayer.style.backgroundColor="";this._hostingLayer.style.backgroundImage="url('"+h+"')";this._hostingLayer.style.backgroundSize=i.width+"px "+i.height+"px";this.pendingContentBackground=null};iAd.ScrollView.prototype.sizeToFit=function(i){var j={};var h=false;if(i.width>this.contentSize.width){this.setValueForAttribute(i.width,"ad-content-width");j["ad-content-width"]=i.width;h=true}if(i.height>this.contentSize.height){this.setValueForAttribute(i.height,"ad-content-height");j["ad-content-height"]=i.height;h=true}if(window.hasOwnProperty("editorProxy")&&(h===true)){window.editorProxy.setValuesForKeysOnComponent(j,this.layer.id)}};iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackground");iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackgroundImage");iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackgroundColor");iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackgroundRepeat");iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackgroundSize");iAd.Class.synthesizeProperty(iAd.ScrollView.prototype,"contentBackgroundPosition");iAd.ScrollView.archivedProperties.push("contentBackground");iAd.ScrollView.archivedProperties.push("contentBackgroundImage");iAd.ScrollView.archivedProperties.push("contentBackgroundColor");iAd.ScrollView.archivedProperties.push("contentBackgroundRepeat");iAd.ScrollView.archivedProperties.push("contentBackgroundSize");iAd.ScrollView.archivedProperties.push("contentBackgroundPosition");var a=iAd.Class.runtimeMethodOverride(iAd.ScrollView,"flashScrollIndicators",function(h){if(!this.usesNativeScrolling){a.apply(this,arguments);return}if(h){this.scrollIndicatorsNeedFlashing=true;return}this._blockHandleScrollEvent=true;var j=this.layer.scrollTop;var i=this.layer.scrollLeft;this.layer.scrollTop--;this.layer.scrollTop++;this.layer.scrollTop=j;this.layer.scrollLeft--;this.layer.scrollLeft++;this.layer.scrollLeft=i});var c=iAd.Class.runtimeMethodOverride(iAd.ScrollView,"handleScrollEvent",function(){if(this._blockHandleScrollEvent){delete this._blockHandleScrollEvent;return}c.apply(this,arguments)});iAd.ScrollView.prototype.viewDidAppear=function(){this.flashScrollIndicators();this.callSuper()}}());