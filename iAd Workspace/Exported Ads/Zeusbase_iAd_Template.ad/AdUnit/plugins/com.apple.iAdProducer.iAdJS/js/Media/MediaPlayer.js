
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.MediaPlayer",superclass:iAd.View,synthesizedProperties:["media","loop"],cssClassName:"ad-media-player"});iAd.MediaPlayer.PLAYBACK_DID_START="mediaPlaybackDidStart";iAd.MediaPlayer.PLAYBACK_DID_PAUSE="mediaPlaybackDidPause";iAd.MediaPlayer.PLAYBACK_DID_BEGIN_WAITING="mediaPlaybackDidBeginWaiting";iAd.MediaPlayer.PLAYBACK_DID_END_WAITING="mediaPlaybackDidEndWaiting";iAd.MediaPlayer.PLAYBACK_DID_END="mediaPlaybackDidEnd";iAd.MediaPlayer.DID_UPDATE_TIME="mediaDidUpdateTime";iAd.MediaPlayer.PLAYING_STATE="ad-media-playing";iAd.MediaPlayer.PAUSED_STATE="ad-media-paused";iAd.MediaPlayer.WAITING_STATE="ad-media-waiting";iAd.MediaPlayer.ENDED_STATE="ad-media-ended";iAd.MediaPlayer.prototype.init=function(a){this._loop=false;this.callSuper(a);this.delegate=null;this.playbackState=null};iAd.MediaPlayer.prototype.getMediaAttributeName=function(){return null};iAd.MediaPlayer.prototype.getMediaClassType=function(){return null};iAd.MediaPlayer.prototype.readPropertiesFromLayerAttributes=function(a){this.callSuper(a);var b=a[this.getMediaAttributeName()];if(b){this.media=b}};iAd.MediaPlayer.prototype.setValueForAttribute=function(b,a){if(a==this.getMediaAttributeName()){return}this.callSuper(b,a)};iAd.MediaPlayer.prototype.play=function(){if(this._media){this.registerMedia(this._media);return this._media.play()}return false};iAd.MediaPlayer.prototype.pause=function(){return(this._media&&this._media._mediaPlayer==this)?this._media.pause():false};iAd.MediaPlayer.prototype.stop=function(){return(this._media&&this._media._mediaPlayer==this)?this._media.stop():false};iAd.MediaPlayer.prototype.seekToTime=function(a){return(this._media&&this._media._mediaPlayer==this)?this._media.seekToTime(a):false};iAd.MediaPlayer.prototype.togglePlayback=function(){if(this._media==null){return false}return this.isPlaying()?this.pause():this.play()};iAd.MediaPlayer.prototype.setMedia=function(a){if(iAd.Utils.objectIsString(a)){a=iAd.Media.mediaTypeForURL(this.getMediaClassType(),a)}if(this._media==a){return}if(this._media){this.unregisterMedia(this._media)}this._media=a;if(a==null){return}if(a.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING){this.registerMedia(a)}};iAd.MediaPlayer.prototype.setLoop=function(a){this._loop=a;this.syncMediaProperties()};iAd.MediaPlayer.prototype.syncMediaProperties=function(){if(!this._media){return}this._media.loop=this._loop};iAd.MediaPlayer.prototype.registerMedia=function(a){if(a._mediaPlayer==this){return false}var b=a._mediaPlayer;if(b){b.unregisterMedia(a)}a._mediaPlayer=this;this.syncMediaProperties();return true};iAd.MediaPlayer.prototype.unregisterMedia=function(a){if(a._mediaPlayer!=this){return false}a._mediaPlayer=null;a.pause();return true};iAd.MediaPlayer.prototype.enterPlaybackState=function(a){if(this.playbackState){this.layer.removeClassName(this.playbackState)}this.playbackState=a;if(a){this.layer.addClassName(a)}};iAd.MediaPlayer.prototype.isPlaying=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING):false};iAd.MediaPlayer.prototype.isPaused=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_PAUSED):false};iAd.MediaPlayer.prototype.isWaiting=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_WAITING):false};iAd.MediaPlayer.prototype.mediaPlaybackDidStart=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_START,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.PLAYING_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidPause=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_PAUSE,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.PAUSED_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidEnd=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_END,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.ENDED_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidBeginWaiting=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_BEGIN_WAITING,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.WAITING_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidEndWaiting=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_END_WAITING,this.delegate)};iAd.MediaPlayer.prototype.mediaDidUpdateTime=function(b,a){this.dispatchNotification(iAd.MediaPlayer.DID_UPDATE_TIME,this.delegate,[["time",a]])};iAd.MediaPlayer.prototype.mediaDidUnload=function(a){this.enterPlaybackState(null)};