
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Video",superclass:iAd.Media,synthesizedProperties:["showsControls","playsInline","view"]});iAd.Video.DID_CHANGE_FULLSCREEN="videoDidChangeFullscreen";iAd.Video.prototype.init=function(a){this._playsInline=true;this._showsControls=false;this._isFullscreen=false;this._view=null;this.callSuper(a)};iAd.Video.prototype.isFullscreenAllowed=function(){return this.element.webkitSupportsFullscreen};iAd.Video.prototype.enterFullscreen=function(){if(this.isFullscreenAllowed()){this.element.webkitEnterFullScreen();return true}return false};iAd.Video.prototype.exitFullscreen=function(){if(this.isFullscreenAllowed()&&this.isFullscreen()){this.element.webkitExitFullScreen();return true}return false};iAd.Video.prototype.isFullscreen=function(){return this._isFullscreen};iAd.Video.prototype.addMediaEventListeners=function(){this.callSuper();var a=this.element;a.addEventListener("webkitbeginfullscreen",this);a.addEventListener("webkitendfullscreen",this);a.addEventListener("webkitfullscreenchange",this)};iAd.Video.prototype.removeMediaEventListeners=function(){this.callSuper();var a=this.element;a.removeEventListener("webkitbeginfullscreen",this);a.removeEventListener("webkitendfullscreen",this);a.removeEventListener("webkitfullscreenchange",this)};iAd.Video.prototype.handleWebkitbeginfullscreen=function(a){this._isFullscreen=true;this.notifyFullscreenDidChange()};iAd.Video.prototype.handleWebkitendfullscreen=function(a){this._isFullscreen=false;this.notifyFullscreenDidChange()};iAd.Video.prototype.handleWebkitfullscreenchange=function(a){this._isFullscreen=document.webkitIsFullScreen&&document.webkitCurrentFullScreenElement==this.element;this.notifyFullscreenDidChange()};iAd.Video.prototype.notifyFullscreenDidChange=function(){this.dispatchMediaNotification(iAd.Video.DID_CHANGE_FULLSCREEN,[["fullscreen",this.isFullscreen()]])};iAd.Video.prototype.setPlaysInline=function(a){if(this._playsInline==a){return}this._playsInline=a;this.updateElementAttributes()};iAd.Video.prototype.setShowsControls=function(a){if(this._showsControls==a){return}this._showsControls=a;this.updateElementAttributes()};iAd.Video.prototype.updateElementAttributes=function(){if(this._element){this.showsControls?this._element.setAttribute("controls",true):this._element.removeAttribute("controls");this.playsInline?this._element.setAttribute("webkit-playsinline",true):this._element.removeAttribute("webkit-playsinline")}};iAd.Video.prototype.getElement=function(){if(!this._element){this._element=document.createElement("video");this.updateElementAttributes()}return this.callSuper()};iAd.Video.prototype.getView=function(){if(this._view==null){this._view=new iAd.VideoView();this._view.video=this}return this._view};iAd.Video.prototype.setView=function(a){};iAd.Video.prototype.dispatchMediaNotification=function(a,b){this.notifyDelegate(a,this._view,b);this.callSuper(a,b)};iAd.Video.videoForURL=function(a){return iAd.Media.mediaTypeForURL(iAd.Video,a)};iAd.Video.restoreFromArchive=function(a){return this.videoForURL(a.url)};iAd.Video.prototype.urlStrategy=function(a){return iAd.Video.urlStrategy?iAd.Video.urlStrategy(a):this.callSuper(a)};iAd.Video.prototype.loadReadyStrategy=function(b,a){return iAd.Video.loadReadyStrategy?iAd.Video.loadReadyStrategy(b,a):this.callSuper(b,a)};iAd.Video.loadReadyStrategy=null;iAd.Video.urlStrategy=null;